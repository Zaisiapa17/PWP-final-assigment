{% extends "layout.html" %}


{% block head %}
<!-- Bootstrap CSS -->
<link href="../static/plugins/bootstrap-5.1.3/bootstrap-5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="../static/plugins/fontawesome-free/css/all.min.css">

<!-- custom css -->
<link rel="stylesheet" href="../static/css/style.css">

<title>halaman Produk</title>
{% endblock %}

{% block body %}

<body>
    <div class="container">
        <div class="row my-3">
            <div class="col">
                <nav class="navbar navbar-light">
                    <div class="container-fluid">
                        <a class="navbar-brand">Navbar</a>
                        <div class="d-flex gap-3">
                            <a class="nav-link text-black" aria-current="page" href="/index">Beranda</a>
                            <a class="nav-link text-secondary border-bottom" href="/products">Produk</a>
                            <a class="nav-link text-black" href="#">Kontak</a>
                            {% if session['customer_is_logged_in'] %}
                            <a href="#" class="btn btn-secondary position-relative rounded-pill">
                                <i class="fas fa-shopping-cart"></i>
                                <span
                                    class="position-absolute top-0 start-100 translate-middle badge rounded-3 bg-danger">
                                    13
                                    <span class="visually-hidden">unread messages</span>
                                </span>
                            </a>
                            {% endif %}
                            <div class="">

                            </div>
                            <a href="#" class="btn btn-outline-secondary">Login</a>
                        </div>
                    </div>
                </nav>
            </div>
        </div>
        <div class="row my-4">
            <div class="col">
                <div id="carouselExampleSlidesOnly" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img src="../static/img/main.jpg" class="d-block w-100" alt="...">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col ms-4">
                <h2 class="custom-title-card-container">Produk Terlaris</h2>
            </div>
        </div>
        <div class="row mt-2">
            <div class="col">
                <div class="d-flex flex-wrap justify-content-start gap-sm-4 ms-4 custom-card-container"
                    id="produk-terlaris">
                    <div class="card" style="width: 12rem;">
                        <img src="https://via.placeholder.com/640x630?text=" class="card-img-top" alt="...">
                        <div class="card-body p-2">
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-7"></span>
                            </p>
                            <h5 class="card-title placeholder-glow">
                                <span class="placeholder col-8 placeholder-lg"></span>
                            </h5>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-6 bg-success placeholder-sm"></span>
                            </p>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7 placeholder-sm bg-secondary"></span>
                            </p>
                        </div>
                    </div>
                    <div class="card" style="width: 12rem;">
                        <img src="https://via.placeholder.com/640x630?text=" class="card-img-top" alt="...">
                        <div class="card-body p-2">
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-7"></span>
                            </p>
                            <h5 class="card-title placeholder-glow">
                                <span class="placeholder col-8 placeholder-lg"></span>
                            </h5>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-6 bg-success placeholder-sm"></span>
                            </p>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7 placeholder-sm bg-secondary"></span>
                            </p>
                        </div>
                    </div>
                    <div class="card" style="width: 12rem;">
                        <img src="https://via.placeholder.com/640x630?text=" class="card-img-top" alt="...">
                        <div class="card-body p-2">
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-7"></span>
                            </p>
                            <h5 class="card-title placeholder-glow">
                                <span class="placeholder col-8 placeholder-lg"></span>
                            </h5>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-6 bg-success placeholder-sm"></span>
                            </p>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7 placeholder-sm bg-secondary"></span>
                            </p>
                        </div>
                    </div>
                    <div class="card" style="width: 12rem;">
                        <img src="https://via.placeholder.com/640x630?text=" class="card-img-top" alt="...">
                        <div class="card-body p-2">
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-7"></span>
                            </p>
                            <h5 class="card-title placeholder-glow">
                                <span class="placeholder col-8 placeholder-lg"></span>
                            </h5>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-6 bg-success placeholder-sm"></span>
                            </p>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7 placeholder-sm bg-secondary"></span>
                            </p>
                        </div>
                    </div>
                    <div class="card" style="width: 12rem;">
                        <img src="https://via.placeholder.com/640x630?text=" class="card-img-top" alt="...">
                        <div class="card-body p-2">
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-7"></span>
                            </p>
                            <h5 class="card-title placeholder-glow">
                                <span class="placeholder col-8 placeholder-lg"></span>
                            </h5>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-6 bg-success placeholder-sm"></span>
                            </p>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7 placeholder-sm bg-secondary"></span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-4">
            <div class="col ms-4">
                <h2 class="custom-title-card-container">Produk Populer</h2>
            </div>
        </div>
        <div class="row mt-2">
            <div class="col">
                <div class="d-flex flex-wrap justify-content-start gap-sm-4 ms-4 custom-card-container"
                    id="produk-populer">
                    <div class="card" style="width: 12rem;">
                        <img src="https://via.placeholder.com/640x630?text=" class="card-img-top" alt="...">
                        <div class="card-body p-2">
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-7"></span>
                            </p>
                            <h5 class="card-title placeholder-glow">
                                <span class="placeholder col-8 placeholder-lg"></span>
                            </h5>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-6 bg-success placeholder-sm"></span>
                            </p>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7 placeholder-sm bg-secondary"></span>
                            </p>
                        </div>
                    </div>
                    <div class="card" style="width: 12rem;">
                        <img src="https://via.placeholder.com/640x630?text=" class="card-img-top" alt="...">
                        <div class="card-body p-2">
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-7"></span>
                            </p>
                            <h5 class="card-title placeholder-glow">
                                <span class="placeholder col-8 placeholder-lg"></span>
                            </h5>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-6 bg-success placeholder-sm"></span>
                            </p>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7 placeholder-sm bg-secondary"></span>
                            </p>
                        </div>
                    </div>
                    <div class="card" style="width: 12rem;">
                        <img src="https://via.placeholder.com/640x630?text=" class="card-img-top" alt="...">
                        <div class="card-body p-2">
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-7"></span>
                            </p>
                            <h5 class="card-title placeholder-glow">
                                <span class="placeholder col-8 placeholder-lg"></span>
                            </h5>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-6 bg-success placeholder-sm"></span>
                            </p>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7 placeholder-sm bg-secondary"></span>
                            </p>
                        </div>
                    </div>
                    <div class="card" style="width: 12rem;">
                        <img src="https://via.placeholder.com/640x630?text=" class="card-img-top" alt="...">
                        <div class="card-body p-2">
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-7"></span>
                            </p>
                            <h5 class="card-title placeholder-glow">
                                <span class="placeholder col-8 placeholder-lg"></span>
                            </h5>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-6 bg-success placeholder-sm"></span>
                            </p>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7 placeholder-sm bg-secondary"></span>
                            </p>
                        </div>
                    </div>
                    <div class="card" style="width: 12rem;">
                        <img src="https://via.placeholder.com/640x630?text=" class="card-img-top" alt="...">
                        <div class="card-body p-2">
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-7"></span>
                            </p>
                            <h5 class="card-title placeholder-glow">
                                <span class="placeholder col-8 placeholder-lg"></span>
                            </h5>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-6 bg-success placeholder-sm"></span>
                            </p>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7 placeholder-sm bg-secondary"></span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-4">
            <div class="col ms-4">
                <h2 class="custom-title-card-container">Rekomendasi Untukmu</h2>
            </div>
        </div>
        <div class="row mt-2">
            <div class="col">
                <div class="d-flex flex-wrap justify-content-start gap-sm-4 ms-4 custom-card-container"
                    id="produk-rekomendasi">
                    <div class="card" style="width: 12rem;">
                        <img src="https://via.placeholder.com/640x630?text=" class="card-img-top" alt="...">
                        <div class="card-body p-2">
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-7"></span>
                            </p>
                            <h5 class="card-title placeholder-glow">
                                <span class="placeholder col-8 placeholder-lg"></span>
                            </h5>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-6 bg-success placeholder-sm"></span>
                            </p>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7 placeholder-sm bg-secondary"></span>
                            </p>
                        </div>
                    </div>
                    <div class="card" style="width: 12rem;">
                        <img src="https://via.placeholder.com/640x630?text=" class="card-img-top" alt="...">
                        <div class="card-body p-2">
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-7"></span>
                            </p>
                            <h5 class="card-title placeholder-glow">
                                <span class="placeholder col-8 placeholder-lg"></span>
                            </h5>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-6 bg-success placeholder-sm"></span>
                            </p>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7 placeholder-sm bg-secondary"></span>
                            </p>
                        </div>
                    </div>
                    <div class="card" style="width: 12rem;">
                        <img src="https://via.placeholder.com/640x630?text=" class="card-img-top" alt="...">
                        <div class="card-body p-2">
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-7"></span>
                            </p>
                            <h5 class="card-title placeholder-glow">
                                <span class="placeholder col-8 placeholder-lg"></span>
                            </h5>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-6 bg-success placeholder-sm"></span>
                            </p>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7 placeholder-sm bg-secondary"></span>
                            </p>
                        </div>
                    </div>
                    <div class="card" style="width: 12rem;">
                        <img src="https://via.placeholder.com/640x630?text=" class="card-img-top" alt="...">
                        <div class="card-body p-2">
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-7"></span>
                            </p>
                            <h5 class="card-title placeholder-glow">
                                <span class="placeholder col-8 placeholder-lg"></span>
                            </h5>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-6 bg-success placeholder-sm"></span>
                            </p>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7 placeholder-sm bg-secondary"></span>
                            </p>
                        </div>
                    </div>
                    <div class="card" style="width: 12rem;">
                        <img src="https://via.placeholder.com/640x630?text=" class="card-img-top" alt="...">
                        <div class="card-body p-2">
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-7"></span>
                            </p>
                            <h5 class="card-title placeholder-glow">
                                <span class="placeholder col-8 placeholder-lg"></span>
                            </h5>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-6 bg-success placeholder-sm"></span>
                            </p>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7 placeholder-sm bg-secondary"></span>
                            </p>
                        </div>
                    </div>
                    <div class="card" style="width: 12rem;">
                        <img src="https://via.placeholder.com/640x630?text=" class="card-img-top" alt="...">
                        <div class="card-body p-2">
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-7"></span>
                            </p>
                            <h5 class="card-title placeholder-glow">
                                <span class="placeholder col-8 placeholder-lg"></span>
                            </h5>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-6 bg-success placeholder-sm"></span>
                            </p>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7 placeholder-sm bg-secondary"></span>
                            </p>
                        </div>
                    </div>
                    <div class="card" style="width: 12rem;">
                        <img src="https://via.placeholder.com/640x630?text=" class="card-img-top" alt="...">
                        <div class="card-body p-2">
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-7"></span>
                            </p>
                            <h5 class="card-title placeholder-glow">
                                <span class="placeholder col-8 placeholder-lg"></span>
                            </h5>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-6 bg-success placeholder-sm"></span>
                            </p>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7 placeholder-sm bg-secondary"></span>
                            </p>
                        </div>
                    </div>
                    <div class="card" style="width: 12rem;">
                        <img src="https://via.placeholder.com/640x630?text=" class="card-img-top" alt="...">
                        <div class="card-body p-2">
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-7"></span>
                            </p>
                            <h5 class="card-title placeholder-glow">
                                <span class="placeholder col-8 placeholder-lg"></span>
                            </h5>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-6 bg-success placeholder-sm"></span>
                            </p>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7 placeholder-sm bg-secondary"></span>
                            </p>
                        </div>
                    </div>
                    <div class="card" style="width: 12rem;">
                        <img src="https://via.placeholder.com/640x630?text=" class="card-img-top" alt="...">
                        <div class="card-body p-2">
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-7"></span>
                            </p>
                            <h5 class="card-title placeholder-glow">
                                <span class="placeholder col-8 placeholder-lg"></span>
                            </h5>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-6 bg-success placeholder-sm"></span>
                            </p>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7 placeholder-sm bg-secondary"></span>
                            </p>
                        </div>
                    </div>
                    <div class="card" style="width: 12rem;">
                        <img src="https://via.placeholder.com/640x630?text=" class="card-img-top" alt="...">
                        <div class="card-body p-2">
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-4"></span>
                                <span class="placeholder col-7"></span>
                            </p>
                            <h5 class="card-title placeholder-glow">
                                <span class="placeholder col-8 placeholder-lg"></span>
                            </h5>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-6 bg-success placeholder-sm"></span>
                            </p>
                            <p class="card-text placeholder-glow mb-0">
                                <span class="placeholder col-7 placeholder-sm bg-secondary"></span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer class="py-3 my-4">
        <ul class="nav justify-content-center border-bottom pb-3 mb-3">
            <li class="nav-item"><a href="#" class="nav-link px-2 text-muted">Home</a></li>
            <li class="nav-item"><a href="#" class="nav-link px-2 text-muted">Features</a></li>
            <li class="nav-item"><a href="#" class="nav-link px-2 text-muted">Pricing</a></li>
            <li class="nav-item"><a href="#" class="nav-link px-2 text-muted">FAQs</a></li>
            <li class="nav-item"><a href="#" class="nav-link px-2 text-muted">About</a></li>
        </ul>
        <p class="text-center text-muted">© 2021 Company, Inc</p>
    </footer>
    <script src="../static/plugins/jquery/jquery.min.js"></script>
    <script>
        // Function to generate product cards and items
        const generateAndAppendProducts = (container, products, criteria, maxItems) => {
            container.html('');
            let totalItems = 0;

            for (let i = 0; i < products.length; i++) {
                let currentItem = products[i];

                if (!criteria(currentItem)) {
                    continue;
                }

                let price = currentItem.price;
                let price_idr = price.toLocaleString('id-ID', { maximumFractionDigits: 0 });

                let item = (`
                    <div class="card" style="width: 12rem; cursor: pointer;" onclick="basketNotif(${currentItem.id}, '${currentItem.product_name}')">
                        <img src="http://localhost:3000/get-image/${currentItem.image}" class="card-img-top" alt="...">
                        <div class="card-body p-2 py-3">
                            <h6 class="card-text custom-card-title">${currentItem.product_name}</h6>
                            <h5 class="card-title">Rp${price_idr}</h5>
                            <span class="badge bg-light text-success">${currentItem.brand_info.brand_address}</span>
                            <span class="d-block badge text-secondary text-start fw-normal">${currentItem.sold_item} terjual</span>
                        </div>
                    </div>
                `);

                container.append(item);

                totalItems++;
                if (totalItems >= maxItems) {
                    break;
                }
            }
        }


        $.ajax({
            type: "GET",
            url: "http://127.0.0.1:3000/product-catalogs",
            dataType: "json",
            beforeSend: function () {
            },
            success: function (respond) {

                // Usage for produk terlaris
                generateAndAppendProducts($("#produk-terlaris"), respond.values, (item) => item.sold_item >= 100, 5);

                // Usage for produk populer
                generateAndAppendProducts($("#produk-populer"), respond.values, (item) => item.price >= 135000, 5);

                // Usage for rekomendasi untukmu
                generateAndAppendProducts($("#produk-rekomendasi"), respond.values, () => true, Infinity);

            },
            error: function () {
                alert("Error");
            },
            complete: function () {
            }
        });


        const basketNotif = (id, name) => {
            var strconfirm = confirm("produk '" + name + "' Tambahkan ke keranjang?");
            if (strconfirm == true) {
                // Perform any additional actions you need here
            }
        }

    </script>
</body>
{% endblock %}